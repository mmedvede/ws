#! /usr/bin/env bash
# Switch the current workspace.
# Regenerates ~/.roswsrc based on selected workspace.
# author: Mikahil Medvedev <mmedvede@cs.uml.edu>

set -e
set -u

# This has to be in sync with the one ws-save uses
POSTFIX="-workspace"
DEPTH=4
dir=$(pwd)
dir=${dir//\//\\\/}
find . -maxdepth $DEPTH -name initialize -executable -type f | grep --color=never -- "$POSTFIX" | sed -e "s/\/[^\/]*$POSTFIX.*//g" | sed -e "s/$dir//"
